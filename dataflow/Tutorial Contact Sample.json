{
	"name": "Tutorial Contact Sample",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"linkedService": {
						"referenceName": "sandbox",
						"type": "LinkedServiceReference"
					},
					"name": "sandboxcontact"
				}
			],
			"sinks": [
				{
					"name": "trainingcontact"
				}
			],
			"transformations": [
				{
					"name": "alterRow1"
				},
				{
					"name": "parentcustomeridEntityReference"
				}
			],
			"scriptLines": [
				"source(output(",
				"          {@odata.etag} as string,",
				"          parentcustomerid as string,",
				"          cog_contactnumber as string,",
				"          contactid as string,",
				"          emailaddress1 as string,",
				"          firstname as string,",
				"          fullname as string,",
				"          lastname as string,",
				"          mobilephone as string,",
				"          salutation as string,",
				"          telephone1 as string",
				"     ),",
				"     allowSchemaDrift: false,",
				"     validateSchema: false,",
				"     store: 'dynamics',",
				"     format: 'dynamicsformat',",
				"     entity: 'contact',",
				"     timeout: 30,",
				"     query: '<fetch mapping=\"logical\" output-format=\"xml-platform\" version=\"1.0\" no-lock=\"false\" distinct=\"true\"><entity name=\"contact\"><attribute name=\"fullname\"/><attribute name=\"entityimage_url\"/><attribute name=\"parent_contactid\"/><order descending=\"false\" attribute=\"cog_contactnumber\"/><attribute name=\"parentcustomerid\"/><attribute name=\"telephone1\"/><attribute name=\"fullname\"/><attribute name=\"emailaddress1\"/><attribute name=\"mobilephone\"/><attribute name=\"jobtitle\"/><attribute name=\"nsri_extensionnumber\"/><attribute name=\"salutation\"/><attribute name=\"cog_contactnumber\"/><attribute name=\"lastname\"/><attribute name=\"firstname\"/><attribute name=\"contactid\"/><filter type=\"and\"><condition attribute=\"statecode\" operator=\"eq\" value=\"0\"/><condition attribute=\"fullname\" operator=\"eq\" value=\"Peter Jones\"/></filter></entity></fetch>') ~> sandboxcontact",
				"parentcustomeridEntityReference alterRow(upsertIf(true())) ~> alterRow1",
				"sandboxcontact derive(Targetparentcustomerlookup = \"account\") ~> parentcustomeridEntityReference",
				"alterRow1 sink(allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     skipDuplicateMapInputs: true,",
				"     skipDuplicateMapOutputs: true,",
				"     mapColumn(",
				"          parentcustomerid,",
				"          cog_contactnumber,",
				"          contactid,",
				"          emailaddress1,",
				"          firstname,",
				"          fullname,",
				"          lastname,",
				"          mobilephone,",
				"          salutation,",
				"          telephone1,",
				"          Targetparentcustomerlookup",
				"     ),",
				"     store: 'dynamics',",
				"     format: 'dynamicsformat',",
				"     entity: 'contact') ~> trainingcontact"
			]
		}
	}
}